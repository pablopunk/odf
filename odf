#!/bin/bash

# Files to be opened:
##Â Modified files ignored deleted
## New untracked files
files=$( {\
  ( git diff -w | grep "^+++ b" | sed 's,+++ b/,,' ) ; \
  ( git status --porcelain | grep ?? | sed s/^??\ // )\
} )

# Use provided editor, 'echo' as default
if [ $# -eq 1 ]; then
  editor=$1
else
  editor=echo
fi

# For vi/vim/nvim open one tab per file
if [[ "$editor" == *"vi"* ]]; then
  editor="$editor -p"
fi

command="$editor $files"

$command
